# Harmonic Beacon - Environment Variables
#
# For local development: copy to .env.local and fill in values
# For production: all secrets are stored in GitHub Secrets
#   and passed as env vars at deploy time (no .env files on server)
#
# Required GitHub Secrets:
#   DB_PASSWORD, AUTH_SECRET, AUTH_ZITADEL_ID, AUTH_ZITADEL_ISSUER,
#   LIVEKIT_API_KEY, LIVEKIT_API_SECRET, PUBLIC_IP,
#   NEXT_PUBLIC_LIVEKIT_URL, NEXT_PUBLIC_GO2RTC_URL

# ===================
# Database (host PostgreSQL)
# ===================
# Local dev: connect to local PG
DATABASE_URL="postgresql://beacon:your_password@localhost:5432/harmonic_beacon?schema=public"

# ===================
# LiveKit (beacon audio streaming)
# ===================
NEXT_PUBLIC_LIVEKIT_URL=wss://live.altermundi.net

# Server-side credentials for token generation API
LIVEKIT_API_KEY=
LIVEKIT_API_SECRET=
LIVEKIT_ROOM_NAME=beacon

# ===================
# Authentication (Zitadel OIDC with PKCE)
# ===================
AUTH_SECRET=              # Generate with: openssl rand -base64 32
AUTH_ZITADEL_ID=          # Zitadel OIDC application client ID
AUTH_ZITADEL_ISSUER=https://auth.altermundi.net
AUTH_TRUST_HOST=true

# ===================
# go2rtc (meditation streaming)
# ===================
# Server-side: internal Docker network URL
GO2RTC_INTERNAL_URL=http://go2rtc:1984

# Client-side: public URL proxied through nginx
NEXT_PUBLIC_GO2RTC_URL=http://localhost:1984/api

# ===================
# File storage (bind-mounted from /mnt/n8n-data/harmonic-beacon/)
# ===================
MEDITATIONS_STORAGE_PATH=/data/meditations
UPLOADS_PATH=/data/uploads
RECORDINGS_PATH=/data/recordings
MAX_UPLOAD_SIZE_MB=100
